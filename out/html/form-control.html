<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>form-control</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/material-dashboard.css">
    <link rel="stylesheet" href="../css/fonts/iconfont.css">
    <link rel="stylesheet" href="../css/muilt-picker.css">
    <style>
        body {
            padding: 50px;
            background: #fff;
        }

        /* 可能需要修改的一些样式 */

        .input-group {
            display: table;
            padding-top: 0;
            margin-bottom: 0px;
            text-align: left;
            width: 100%;
        }
        .salary-picker {
            position: static;
        }
        .form-control-group {
            display: table;
            float: none;
            height: 40px;
            width: 100%;
            padding: 8px 0 0;
            font-size: 14px;
            line-height: 1.428571429;
            border: 0;
            background-image: linear-gradient(#f7235e, #f7235e), linear-gradient(#D2D2D2, #D2D2D2);
            background-size: 0 2px, 100% 1px;
            background-repeat: no-repeat;
            background-position: center bottom, center calc(100% - 1px);
            background-color: rgba(0, 0, 0, 0);
            transition: background 0s ease-out;
            box-shadow: none;
            border-radius: 0;
            font-weight: 400;
        }

        .form-control-group .control-label {
            top: 0px !important;
            left: auto !important;
            font-size: 12px !important;
        }
        .form-control-group  .input-group-addon {
            padding-top: 0;
        }

        .form-group.label-static label.control-label,
        .form-group.label-floating.is-focused label.control-label,
        .form-group.label-floating:not(.is-empty) label.control-label {
            top: -20px !important;
        }

        .form-control-group input{
            background: transparent;
        }
        .picker-start{
            text-align: left!important;
        }
        .picker-end{
            text-align: right!important;
        }
    </style>

    <style>

        .form-control-group .form-control {
            background: none !important;
        }

        .form-control-group::-moz-placeholder {
            color: #AAAAAA;
            font-weight: 400;
        }

        .form-control-group:-ms-input-placeholder {
            color: #AAAAAA;
            font-weight: 400;
        }

        .form-control-group::-webkit-input-placeholder {
            color: #AAAAAA;
            font-weight: 400;
        }

        .form-control-group[readonly],
        .form-control-group[disabled],
        fieldset[disabled] .form-control-group {
            background-color: rgba(0, 0, 0, 0);
        }

        .form-control-group[disabled],
        fieldset[disabled] .form-control-group {
            background-image: none;
            border-bottom: 1px dotted #D2D2D2;
        }

        .form-group .form-control-group.valid:focus {
            background-image: linear-gradient(#f7235e, #f7235e), linear-gradient(#D2D2D2, #D2D2D2);
        }

        .form-group.is-focused .form-control-group {
            outline: none;
            background-image: linear-gradient(#f7235e, #f7235e), linear-gradient(#D2D2D2, #D2D2D2);
            background-size: 100% 2px, 100% 1px;
            box-shadow: none;
            transition-duration: 0.3s;
        }

        .form-group.is-focused .form-control-group .material-input:after {
            background-color: #f7235e;
        }

        .form-group.is-focused.form-info .form-control-group {
            background-image: linear-gradient(#1d1d1d, #1d1d1d), linear-gradient(#D2D2D2, #D2D2D2);
        }

        .form-group.is-focused.form-success .form-control-group {
            background-image: linear-gradient(#f7235e, #f7235e), linear-gradient(#D2D2D2, #D2D2D2);
        }

        .form-group.is-focused.form-warning .form-control-group {
            background-image: linear-gradient(#ff7e8f, #ff7e8f), linear-gradient(#D2D2D2, #D2D2D2);
        }

        .form-group.is-focused.form-danger .form-control-group {
            background-image: linear-gradient(#f7235e, #f7235e), linear-gradient(#D2D2D2, #D2D2D2);
        }

        .form-group.is-focused.form-white .form-control-group {
            background-image: linear-gradient(#FFFFFF, #FFFFFF), linear-gradient(#D2D2D2, #D2D2D2);
        }

        .form-group.has-warning .form-control-group {
            box-shadow: none;
        }

        .form-group.has-warning.is-focused .form-control-group {
            background-image: linear-gradient(#ff7e8f, #ff7e8f), linear-gradient(#D2D2D2, #D2D2D2);
        }

        .form-group.has-error .form-control-group {
            box-shadow: none;
        }

        .form-group.has-error.is-focused .form-control-group {
            background-image: linear-gradient(#f7235e, #f7235e), linear-gradient(#D2D2D2, #D2D2D2);
        }

        .form-group.has-error .form-control-group {
            background-image: linear-gradient(#f7235e, #f7235e), linear-gradient(#D2D2D2, #D2D2D2);
            background-size: 100% 2px, 100% 1px;
            transition-duration: 0.3s;
        }

        .form-group.has-success .form-control-group {
            box-shadow: none;
        }

        .form-group.has-success.is-focused .form-control-group {
            background-image: linear-gradient(#f7235e, #f7235e), linear-gradient(#D2D2D2, #D2D2D2);
        }

        .form-group.has-info .form-control-group {
            box-shadow: none;
        }

        .form-group.has-info.is-focused .form-control-group {
            background-image: linear-gradient(#1d1d1d, #1d1d1d), linear-gradient(#D2D2D2, #D2D2D2);
        }

        .form-control-group::-moz-placeholder {
            font-size: 14px;
            line-height: 1.428571429;
            color: #AAAAAA;
            font-weight: 400;
        }

        .form-control-group:-ms-input-placeholder {
            font-size: 14px;
            line-height: 1.428571429;
            color: #AAAAAA;
            font-weight: 400;
        }

        .form-control::-webkit-input-placeholder {
            font-size: 14px;
            line-height: 1.428571429;
            color: #AAAAAA;
            font-weight: 400;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <form action="" class="form">
            <div class="form-items">
            <div class="row">
                <div class="col-xs-4">
                    <div class="input-group">
                        <div class="form-group label-floating ">
                            <div class="form-control-group">
                                <span class="input-group-addon">
                                    <i class="icon icon-zhanghao"></i>
                                </span>
                                <label class="control-label">
                                    <span class="text">
                                        姓名
                                    </span>
                                </label>
                                <input class="form-control " name="name" type="text">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class="input-group">
                        <div class="form-group label-floating ">
                            <div class="form-control-group">
                                <span class="input-group-addon">
                                    <i class="icon icon-zhanghao"></i>
                                </span>
                                <label class="control-label">
                                    <span class="text">
                                        年龄
                                    </span>
                                </label>
                                <input class="form-control " name="age" type="text">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-xs-4">
                    <div class="input-group">
                        <div class="form-group label-floating is-empty">
                            <div class="form-control-group">
                                <span class="input-group-addon">
                                    <i class="icon icon-zhanghao"></i>
                                </span>
                                <label class="control-label">
                                    <span class="text">
                                        薪资
                                    </span>
                                </label>
                                <div class="salary-picker muilt-picker">
                                    <div class="picker-input-group">
                                        <input class="picker-start" type="text" name="salary1" readonly>
                                        <span class="split-label"></span>
                                        <input class="picker-end form-control" type="text" name="salary2" readonly>
                                    </div>
                                    <div class="picker-container">
                                        <ul class="select-group scroll-bar">
                                            <li class="li-item" data-value="1000">1000</li>
                                            <li class="li-item" data-value="2000">2000</li>
                                            <li class="li-item" data-value="3000">3000</li>
                                            <li class="li-item" data-value="4000">4000</li>
                                            <li class="li-item" data-value="5000">5000</li>
                                            <li class="li-item" data-value="6000">6000</li>
                                            <li class="li-item" data-value="7000">7000</li>
                                            <li class="li-item" data-value="8000">8000</li>
                                            <li class="li-item" data-value="9000">9000</li>
                                            <li class="li-item" data-value="10000">10000</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </form>
    </div>
    <script src="../js/jquery.min.js"></script>
    <script src="../js/material.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/sweetalert2.js"></script>
    <script src="../js/jquery.tagsinput.js"></script>
    <script src="../js/perfect-scrollbar.jquery.min.js"></script>
    <script src="../js/material-dashboard.js"></script>
    <script src="../js/jquery.validate.min.js" ></script>

    <script src="../js/muiltPicker.js"></script>
    <script>
        $(".salary-picker").muiltPicker({
            mede: 'range',
            // 鼠标移出组件容器时关闭?
            leaveClose: false,
            // 点击组件外时自动关闭?
            autoClose: false,
            // 隐藏组件时重置已选项? 
            resetSelected: true,
            // 自定义一些即将会用到的元素, 将它们合并到 this.elms
            customElms: function (source, context) {
                return {
                    start: $(".picker-start", source),
                    end: $(".picker-end", source)
                }
            },
            // 在组件外点击时, 会调用outsideClick, 根据返回值确定是否要隐藏组件
            // true: 隐藏 flase: 阻止隐藏
            outsideClick: function (selected) {
                return !this.options.active || this.options.active == 'start';
            },
            // 用户点击了某一个选项, 如果 beforeChange 里的返回值为false, 那么可以阻止触发组件的afterChange方法
            // 最佳实践: 在 beforeChange 处理是否 触发选择项改变, 在afterChange处理 选择项改变
            beforeChange: function ($that, selected, active) {
                if (active == 'start') {
                    var index = $that.index();
                    this.options.active = 'end';
                    this.elms.start.val($that.data("value")).trigger("change");
                    this.elms.end.val('');
                    // 将 index 小于当前选择元素的兄弟元素设置为不可点击
                    $that.siblings().each(function () {
                        if (index > $(this).index()) {
                            $(this).addClass("disabled");
                        }
                    })
                } else {
                    this.options.active = 'start';
                    this.elms.end.val($that.data("value")).trigger("change");
                }
                $that.addClass("selected");
            },
            // 处理 用户选择项改变 时的逻辑
            afterChange: function ($that, selected, active) {
                active == 'start' && this.hide();
            },
            triggered: function(){
                this.elms.end.trigger("focus");
            },
            // 组件已隐藏时
            afterHide: function () {
                this.options.active = 'start';
                this.elms.option.removeClass("selected").removeClass("disabled");
                this.elms.end.trigger("blur");
                this.source.closest(".form-group")[this.elms.end.val() != '' ? 'removeClass': 'addClass']("is-empty");
            }
        });
    </script>
    <script>
        $(function() {
            function setValids(form, rules) {
                var valid = {};
                for (var key in rules) {
                    valid[key] = false;
                }
                form.data("valid", valid);
                return rules;
            }
            function verifyName(validator, label) {
                var submit = $(label).closest(".form").find(".submit");
                if (validator.element(label)) {
                    submit.removeClass("disabled");
                } else {
                    submit.addClass("disabled");
                }
            }
            var validation = $(".form").setFormValidation({
                rules: setValids($(".form"),{
                    name: {
                        rangelength: [2, 4],
                        required: true
                    },
                    age: {
                        required: true
                    },
                    salary2: {
                        required: true
                    }
                }),
                messages: {
                    name: {
                        required: "姓名不能为空",
                        rangelength: "姓名应为2~4字符"
                    },
                    age: {
                        required: "请输入年龄"
                    },
                    salary2: {
                        required: "请选择薪资"
                    }
                },
                success: function (label) {
                    label.closest(".form-group").removeClass("has-error");
                },
                onkeyup: function (label) {
                    verifyName(validation, label);
                },
                onfocusout: function (label) {
                    verifyName(validation, label);
                },
                focusInvalid: true
            });
        })
    </script>
</body>

</html>
